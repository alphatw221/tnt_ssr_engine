<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<title>customer_register_form</title>
</head>
<body>
<h1>customer_register_form</h1>
<h2>src/components/component-instance/RegisterForm.jsx</h2>
<pre>import PropTypes from &quot;prop-types&quot;;
import React, { Fragment, useState, useEffect, useRef } from &quot;react&quot;;
import clsx from &quot;clsx&quot;;
import style from './RegisterForm.module.scss'
          
import { useAppSelector, useAppDispatch } from &quot;@/redux/hooks&quot;;

import { customer_register } from &quot;../../api/customer&quot;
import Cookies from &quot;js-cookie&quot;;
import { createValidator } from &quot;../../lib/validator&quot;
// import route_names from &quot;../../route_names&quot;;

// import 'intl-tel-input/build/css/intlTelInput.css';
// import './RegisterForm.css'
// import intlTelInput from 'intl-tel-input';
// import axios from &quot;axios&quot;;
// import {  getRWDStyles} from &quot;@/lib/utils/rwdHelper&quot;
// import  Link  from 'next/link';
// import {  useRouter } from 'next/navigation';
// import { useSearchParams } from 'next/navigation';
import {getClientIPCountryCode} from '@/fetch/ipapi'

const RegisterForm = ({  
    // node,  
    // mode, 
    // actions, 
    // update,
    // children, routingTable, ...props

    routingTable,
    element, 
    elementProps,
    mode,
    ...props
}) =&gt; {
    


    const dispatch = useAppDispatch();

    
    
    // const websiteEditorState = useAppSelector((state) =&gt; state.website_editor);

    
    // const telInput = useRef()
    // const [iti, setIti] = useState(null)
    // const searchParams = useSearchParams()

    // useEffect(()=&gt;{

    //     var iti = intlTelInput(telInput.current, {
    //     utilsScript:&quot;/js/iti_utils.js&quot;,
    //     initialCountry: &quot;auto&quot;,
    //     geoIpLookup:(callback)=&gt;{
    //         if(Cookies.get('country_code')){
    //         callback(Cookies.get('country_code'))
    //         }else{
    //         axios.get('https://ipapi.co/json')
    //         .then( (res) =&gt; {
    //             Cookies.set('country_code',res?.data?.country_code)
    //             callback(res?.data?.country_code||&quot;us&quot;)
    //         })
    //         .catch( (error) =&gt; {
    //             callback(&quot;us&quot;)
    //         })
    //         }
    //     }
    //     })
    //     setIti(iti)
    // }, [])

    // const [width, setWidth] = useState('')
    const [country, setCountry] = useState(null)
        
    useEffect(()=&gt;{   
        getClientIPCountryCode().then(_country=&gt;{
            setCountry(_country)
        })
    }, [])

    const [registerData, setRegisterData] = useState({
        first_name:'', last_name:'',phone:'', email:'',password:'', confirm_password:''
    })

    const [showEmailVerificationNotification, setShowEmailVerificationNotification] = useState(false)
    const [awaitSubmitButton, setAwaitSubmitButton] = useState(false)

    const [viewPassword, setViewPassword] = useState(false)
    const [viewConfirmPassword, setViewConfirmPassword] = useState(false)

    // const [rememberMe,setRememberMe] = useState(Cookies.get('customer_me')?true:false)

    const [, forceUpdate] = useState();
    const registerFormValidator = useRef(createValidator())

    // const router = useRouter()
    

    const handleRegister = (event)=&gt;{

        if(!registerFormValidator.current.allValid()){
            registerFormValidator.current.showMessages()
            forceUpdate(new Date())
            return
          }

          setAwaitSubmitButton(true)
        customer_register({registerData, country}).then(res=&gt;{
            console.log(res.data)
            setShowEmailVerificationNotification(true)
            setAwaitSubmitButton(false)
        }).catch(err=&gt;{
            setAwaitSubmitButton(false)
        })

    }

    // useEffect(()=&gt;{

    //     rwdHelper(
    //         websiteEditorState.windowWidth, 
    //         websiteEditorState.sideMenuActive, 
    //         [
    //             new RWDPropHandler(node?.data, 'rwd_width', 'width_unit', setWidth),
    //         ]
    //     )



    // },[ websiteEditorState.windowWidth, websiteEditorState.sideMenuActive, setWidth, node?.data])


    // useEffect(()=&gt;{
    //     if(![undefined,null,''].includes(Cookies.get('customer_access_token'))){
    //         // navigate(route_names.home)
    //         // window.location.href = route_names.home
    //         router.push(searchParams.get('from')||'/')

    //     }
    // },[])


    return (
    
        
        &lt;Fragment&gt;
        &lt;form
           {...elementProps}
        &gt;
            &lt;div className={clsx(style['標題框'], '標題框')}&gt;
                &lt;h3 className={clsx(style['標題'], '標題')}&gt;新顧客註冊&lt;/h3&gt;
            &lt;/div&gt;

            &lt;div className={clsx(style['名字框'], '名字框')}&gt;
                &lt;label className={clsx(style['名字-標籤'], '名字-標籤')}&gt;名字：&lt;/label&gt;
                &lt;input
                    className={clsx(style['名字-輸入'], '名字-輸入')}
                    type=&quot;text&quot;
                    name=&quot;customer-first-name&quot;
                    placeholder=&quot;名字 First Name&quot;
                    value={registerData.first_name}
                    onChange={(e)=&gt;{
                        setRegisterData({...registerData, first_name:e.target.value})
                    }}
                    onBlur={() =&gt; {
                        registerFormValidator.current.showMessageFor(&quot;first_name&quot;)
                        forceUpdate(new Date())
                    }}
                /&gt;
                {registerFormValidator.current.message(&quot;first_name&quot;, registerData.first_name, &quot;required&quot;)}
            &lt;/div&gt;
                
            &lt;div className={clsx(style['姓氏框'], '姓氏框')}&gt;
                &lt;label className={clsx(style['姓氏-標籤'], '姓氏-標籤')}&gt;姓氏：&lt;/label&gt;
                &lt;input
                    className={clsx(style['姓氏-輸入'], '姓氏-輸入')}
                    type=&quot;text&quot;
                    name=&quot;customer-last-name&quot;
                    placeholder=&quot;姓氏 Last Name&quot;
                    value={registerData.last_name}
                    onChange={(e)=&gt;{
                        setRegisterData({...registerData, last_name:e.target.value})
                    }}
                    onBlur={() =&gt; {
                        registerFormValidator.current.showMessageFor(&quot;last_name&quot;)
                        forceUpdate(new Date())
                    }}
                /&gt;
                {registerFormValidator.current.message(&quot;last_name&quot;, registerData.last_name, &quot;required&quot;)}
            &lt;/div&gt;
                
            &lt;div className={clsx(style['電話框'], '電話框')}&gt;
                &lt;label className={clsx(style['電話-標籤'], '電話-標籤')}&gt;電話：&lt;/label&gt;
                &lt;input
                    className={clsx(style['電話-輸入'], '電話-輸入')}
                    type=&quot;tel&quot;
                    name=&quot;customer-phone&quot;
                    placeholder=&quot;電話 Phone&quot;
                    value={registerData.phone}
                    onChange={(e)=&gt;{
                        setRegisterData({...registerData, phone:e.target.value})
                    }}
                    onBlur={() =&gt; {
                        registerFormValidator.current.showMessageFor(&quot;phone&quot;)
                        forceUpdate(new Date())
                    }}
                /&gt;
                {registerFormValidator.current.message(&quot;phone&quot;, registerData.phone, &quot;required&quot;)}
            &lt;/div&gt;


            &lt;div className={clsx(style['電子郵件框'], '電子郵件框')}&gt;
                &lt;label className={clsx(style['電子郵件-標籤'], '電子郵件-標籤')}&gt;電子郵件：&lt;/label&gt;
                &lt;input
                    className={clsx(style['電子郵件-輸入'], '電子郵件-輸入')}
                    type=&quot;email&quot;
                    name=&quot;customer-email&quot;
                    placeholder=&quot;電子郵件 Email&quot;
                    value={registerData.email}
                    onChange={(e)=&gt;{
                        setRegisterData({...registerData, email:e.target.value})
                    }}
                    onBlur={() =&gt; {
                        registerFormValidator.current.showMessageFor(&quot;email&quot;)
                        forceUpdate(new Date())
                    }}
                /&gt;
                {registerFormValidator.current.message(&quot;email&quot;, registerData.email, &quot;required|email&quot;)}
            &lt;/div&gt;
                
            &lt;div className={clsx(style['密碼框'], '密碼框')}&gt;
                &lt;label className={clsx(style['密碼-標籤'], '密碼-標籤')}&gt;密碼：&lt;/label&gt;
                &lt;div className={clsx(style['密碼輸入框'], '密碼輸入框')}&gt;
                    &lt;input
                        className={clsx(style['密碼-輸入'], '密碼-輸入')}
                        type={viewPassword?'text':'password'}
                        name=&quot;customer-password&quot;
                        placeholder=&quot;密碼 Password&quot;
                        onChange={(e)=&gt;{
                            setRegisterData({...registerData, password:e.target.value})
                        }}
                        onBlur={() =&gt; {
                            registerFormValidator.current.showMessageFor(&quot;password&quot;)
                            forceUpdate(new Date());
                        }}
                    /&gt;
                    &lt;button className={clsx(style['顯示密碼-按鈕'], '顯示密碼-按鈕')} type=&quot;button&quot; onClick={()=&gt;{setViewPassword(!viewPassword)}}&gt;
                        &lt;i className={clsx(style['顯示密碼-圖標'], '顯示密碼-圖標', viewPassword?&quot;fa fa-solid fa-eye-slash&quot;:&quot;fa fa-solid fa-eye&quot;)} /&gt;
                    &lt;/button&gt;
                &lt;/div&gt;
                
                {registerFormValidator.current.message(&quot;password&quot;, registerData.password, &quot;required|min:8&quot;, {messages:{'min':'密碼至少需為8位'}})}
            &lt;/div&gt;
                
            &lt;div className={clsx(style['確認密碼框'], '確認密碼框')}&gt;
                &lt;label className={clsx(style['確認密碼-標籤'], '確認密碼-標籤')}&gt;確認密碼：&lt;/label&gt;
                &lt;div className={clsx(style['確認密碼輸入框'], '確認密碼輸入框')}&gt;
                    &lt;input
                        className={clsx(style['確認密碼-輸入'], '確認密碼-輸入')}
                        type={viewConfirmPassword?'text':'password'}
                        name=&quot;customer-confirm-password&quot;
                        placeholder=&quot;確認密碼 Confirm Password&quot;
                        onChange={(e)=&gt;{
                            setRegisterData({...registerData, confirm_password:e.target.value})
                        }}
                        onBlur={() =&gt; {
                            registerFormValidator.current.showMessageFor(&quot;confirm_password&quot;)
                            forceUpdate(new Date());
                        }}
                    /&gt;
                    &lt;button className={clsx(style['顯示確認密碼-按鈕'], '顯示確認密碼-按鈕')} type=&quot;button&quot; onClick={()=&gt;{setViewConfirmPassword(!viewConfirmPassword)}}&gt;
                        &lt;i className={clsx(style['顯示確認密碼-圖標'], '顯示確認密碼-圖標', viewConfirmPassword?&quot;fa fa-solid fa-eye-slash&quot;:&quot;fa fa-solid fa-eye&quot;)} /&gt;
                    &lt;/button&gt;
                &lt;/div&gt;
               
                {registerFormValidator.current.message(&quot;confirm_password&quot;, registerData.confirm_password, `required|in:${registerData.password}`)}
            &lt;/div&gt;

            &lt;div className={clsx(style['登入註冊框'], '登入註冊框')}&gt;
                &lt;div className={clsx(style['註冊按鈕框'], '註冊按鈕框')}&gt;
                    &lt;button  className={clsx(style['註冊按鈕'], '註冊按鈕', awaitSubmitButton?`${style['等待']} 等待`:'')} type=&quot;button&quot;  onClick={handleRegister}&gt;
                    註冊 Register
                    &lt;/button&gt;
                &lt;/div&gt;

                &lt;div className={clsx(style['登入連結框'], '登入連結框')}&gt;
                    &lt;a className={clsx(style['登入連結'], '登入連結')} href={`/${routingTable?.['customer_login_route']}`} &gt;登入&lt;/a&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/form&gt;
        &lt;div className={clsx(style['電子郵件認證通知框'], '電子郵件認證通知框', showEmailVerificationNotification?`${style['顯示']} 顯示`:'')}&gt;
            &lt;div className={clsx(style['電子郵件認證通知-文字框'], '電子郵件認證通知-文字框')}&gt;
                &lt;span className={clsx(style['電子郵件認證通知-文字'], '電子郵件認證通知-文字')}&gt;認證信件已寄出，請點擊認證連結以完成註冊&lt;/span&gt;
            &lt;/div&gt;
            &lt;div className={clsx(style['電子郵件認證通知-確認按鈕框'], '電子郵件認證通知-確認按鈕框')}&gt;
                &lt;button className={clsx(style['電子郵件認證通知-確認按鈕'], '電子郵件認證通知-確認按鈕')} onClick={()=&gt;{setShowEmailVerificationNotification(false)}}&gt;確認&lt;/button&gt;
            &lt;/div&gt;
        &lt;/div&gt;
        &lt;/Fragment&gt;
    )
};

RegisterForm.propTypes = {
};

export default RegisterForm;




</pre>
<h2>src/components/component-instance/RegisterForm.module.scss</h2>
<pre>// @import &quot;@/assets/scss/my-variables&quot;;



// $props: (
//   width: (
//     name: &quot;width&quot;,
//     default:50vw,
//   ),
//   max-width:(
//     name: &quot;max-width&quot;,
//   ),
//   min-width:(
//     name: &quot;min-width&quot;,
//   ),
//   height:(
//     name: &quot;height&quot;,
//   ),
//   max-height:(
//     name: &quot;max-height&quot;,
//   ),
//   min-height:(
//     name: &quot;min-height&quot;,
    
//   ),

// );







.顧客註冊表單 {

  background: #ffffff;
  padding: 24px;
  border-radius: 8px;
  box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.1);
  width: 340px;
  display: flex;
  flex-direction: column;
  gap: 16px;
}
.標題框 {
  text-align: center;
}
.標題 {
  font-size: 20px;
  color: #333;
  margin: 0;
}
.名字框,
.姓氏框,
.電話框,
.電子郵件框,
.密碼框,
.確認密碼框 {
  display: flex;
  flex-direction: column;
  gap: 6px;
}
.名字-標籤,
.姓氏-標籤,
.電話-標籤,
.電子郵件-標籤,
.密碼-標籤,
.確認密碼-標籤 {
  font-size: 14px;
  color: #333;
}
.名字-輸入,
.姓氏-輸入,
.電話-輸入,
.電子郵件-輸入,
.密碼-輸入,
.確認密碼-輸入 {
  padding: 10px;
  border: 1px solid #ccc;
  border-radius: 4px;
  font-size: 14px;
  width: 100%;
  box-sizing: border-box;
}
.登入註冊框 {
  display: flex;
  justify-content: space-between;
  align-items: center;
}
.註冊按鈕 {
  background-color: #007bff;
  color: white;
  border: none;
  padding: 10px 16px;
  border-radius: 4px;
  cursor: pointer;
  font-size: 14px;
  flex: 1;
}
.註冊按鈕.等待 {
  visibility:hidden;
}
.註冊按鈕:hover {
  background-color: #0056b3;
}
.登入連結 {
  font-size: 14px;
  color: #007bff;
  text-decoration: none;
}
.登入連結:hover {
  text-decoration: underline;
}




.密碼輸入框,.確認密碼輸入框 {
  position: relative;
  display: flex;
  align-items: center;
  width: 100%;
  max-width: 300px;
  border: 1px solid #ccc;
  border-radius: 5px;
  padding: 5px;
  background: white;
}

.顯示密碼-按鈕,
.顯示確認密碼-按鈕 {
    background: none;
    border: none;
    cursor: pointer;
    padding: 5px;
}

.顯示密碼-圖標,
.顯示確認密碼-圖標 {
    font-size: 16px;
    color: #666;
}


.電子郵件認證通知框 {
  display: none;
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translateX(-50%);
  background-color: #f8d7da;
  color: #721c24;
  border: 1px solid #f5c6cb;
  padding: 15px;
  border-radius: 5px;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
}

.電子郵件認證通知框.顯示 {
  display: block;
}

.電子郵件認證通知-文字框 {
  margin-bottom: 10px;
}

.電子郵件認證通知-文字 {
  font-size: 14px;
}

.電子郵件認證通知-確認按鈕框 {
  text-align: right;
}

.電子郵件認證通知-確認按鈕 {
  background-color: #007bff;
  color: white;
  border: none;
  padding: 5px 10px;
  border-radius: 3px;
  cursor: pointer;
}

.電子郵件認證通知-確認按鈕:hover {
  background-color: #007bff;
}

  // .login_register_form {
  //   background: transparent none repeat scroll 0 0;
  //   box-shadow: 0 0 6px rgba(0, 0, 0, 0.1);
  //   padding: 20px;
  //   @media #{$lg-layout} {
  //     padding: 20px 20px;
  //   }
  //   @media #{$xs-layout} {
  //     padding: 10px 5px;
  //   }



  //   @media only screen and (min-width: 1536px){
  //     width:var(--width-xxl, 350px);
  //     max-width: var(--max-width-xxl);
  //     min-width: var(--min-width-xxl);
  //   }
  //   @media only screen and (min-width: 1280px) and (max-width: 1535px){
  //       width:var(--width-xl, 350px);
  //       max-width: var(--max-width-xl);
  //       min-width: var(--min-width-xl);
  //   }
  //   @media only screen and (min-width: 1024px) and (max-width: 1279px){
  //       width:var(--width-lg, 350px);
  //       max-width: var(--max-width-lg);
  //       min-width: var(--min-width-lg);
  //   }
  //   @media only screen and (min-width: 768px) and (max-width: 1023px){
  //       width:var(--width-md, 350px);
  //       max-width: var(--max-width-md);
  //       min-width: var(--min-width-md);
  //   }
  //   @media only screen and (min-width: 640px) and (max-width: 767px){
  //       width:var(--width-sm, 350px);
  //       max-width: var(--max-width-sm);
  //       min-width: var(--min-width-sm);
  //   }
  //   @media only screen and (min-width: 390px) and (max-width: 636px){
  //       width:var(--width-xs, 350px);
  //       max-width: var(--max-width-xs);
  //       min-width: var(--min-width-xs);
  //   }
  //   @media only screen and (max-width: 389px){
  //       width:var(--width-xxs, 350px);
  //       max-width: var(--max-width-xxs);
  //       min-width: var(--min-width-xxs);
  //   }
    
  //   display: flex;
  //   flex-direction: column;
  //   justify-content: center;

  //   form {
  //       // margin-bottom: 30px;
  //     h3{
  //       margin-bottom: 30px;
  //     }
  //     input {
  //       min-width: 280px;
  //       background-color: transparent;
  //       border: 1px solid #ebebeb;
  //       color: #333;
  //       font-size: 14px;
  //       height: 45px;
  //       // margin-bottom: 30px;
  //       padding: 0 15px;
  //     }
  //     input[type=&quot;checkbox&quot;] {
  //       height: 15px;
  //       margin: 0;
  //       position: relative;
  //       top: 1px;
  //       width: 17px;
  //     }
  //     .button_box {
  //       .login_toggle_btn {
  //         margin-top: 30px;
  //         padding: 10px 0 19px;
  //         label {
  //           color: #242424;
  //           font-size: 15px;
  //           font-weight: 400;
  //           @media #{$xs-layout} {
  //             font-size: 14px;
  //           }
  //         }
  //         a {
  //           color: #242424;
  //           float: right;
  //           font-size: 15px;
  //           @media #{$xs-layout} {
  //             font-size: 14px;
  //           }
  //           transition: all 0.3s ease 0s;
  //           &amp;:hover {
  //             color: $theme-color;
  //           }
  //         }
  //       }
  //       button {
  //         background-color: #f2f2f2;
  //         border: medium none;
  //         color: #333;
  //         cursor: pointer;
  //         font-size: 14px;
  //         font-weight: 500;
  //         line-height: 1;
  //         padding: 11px 30px;
  //         margin-top: 30px;
  //         margin-bottom: 30px;
  //         text-transform: uppercase;
  //         transition: all 0.3s ease 0s;
  //         &amp;:hover {
  //           background-color: $theme-color;
  //           color: #fff;
  //         }
  //       }
  //     }


  //     .login-row{
  //       a{
  //         color:rgb(68, 141, 220);
  //         margin-left: 10px;
  //         &amp;:hover{
  //           color:rgb(35, 84, 158)
  //         }
  //       }
  //     }
  //     // .customer-phone{
  //     //   &gt;div{
  //     //     display:inline ;

  //     //   }
  //     // }
  //   }
  // }</pre>
</body>
</html>